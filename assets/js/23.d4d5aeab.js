(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{334:function(t,a,s){"use strict";s.r(a);var e=s(25),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"charles-bluestacks-5-adb-抓包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#charles-bluestacks-5-adb-抓包"}},[t._v("#")]),t._v(" Charles + BlueStacks 5 + Adb 抓包")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.charlesproxy.com/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Charles 下载地址"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.zzzmode.com/mytools/charles/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Charles 激活工具"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://pan.baidu.com/s/1jFIsJ9L8VLwJhs1aYDxxgw?p=e6qh",target:"_blank",rel:"noopener noreferrer"}},[t._v("BlueStacks 5"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://adbdownload.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ADB"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"安装及配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装及配置"}},[t._v("#")]),t._v(" 安装及配置")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("Charles")]),t._v("权限配置")])]),t._v(" "),a("p",[t._v("文件位置 "),a("code",[t._v("C:\\ProgramData\\BlueStacks_nxt\\bluestacks.conf")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('bst.feature.rooting="0" => bst.feature.rooting="1"\nbst.instance.Nougat64.enable_root_access="0" => bst.instance.Nougat64.enable_root_access="1"\n')])])]),a("blockquote",[a("p",[a("code",[t._v("BlueStacks")]),t._v("安装证书")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. 准备证书")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Help->SLL Proxying->Save Charles Root Certificate... 保存证书名称为 charles.pem")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. 生成证书，执行如下命名：")]),t._v("\n$ openssl x509 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-in")]),t._v(" charles.pem "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-subject_hash_old")]),t._v("\n7e8692e6\n-----BEGIN CERTIFICATE-----\nMIIFRjCCBC6gAwIBAgIGAY8S0xPnMA0GCSqGSIb3DQEBCwUAMIGnMTgwNgYDVQQD\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n-----END CERTIFICATE-----\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. 重命名证书: charles.pem -> 7e8692e6.0, 7e8692e6是上面计算的哈希值")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4. 导入证书，注意权限问题，再如下命令执行")]),t._v("\n\n$ adb connect "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:51328\n$ adb root\n$ adb push D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("7e8692e6.0 /data/loacl/tmp\n$ adb shell\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" rw,remount /system\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /data/loacl/tmp\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" system:system 7e8692e6.0\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("664")]),t._v(" 7e8692e6.0\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" 7e8692e6.0 /system/etc/security/cacerts/\n\n")])])]),a("blockquote",[a("p",[a("code",[t._v("BlueStacks")]),t._v("使用"),a("code",[t._v("Charles")]),t._v("代理：")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置代理")]),t._v("\n$ adb root\n$ adb shell\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v("\n$ settings put global http_proxy "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.19")]),t._v(".209.246:8888\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消代理")]),t._v("\n$ settings put global http_proxy :0\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);