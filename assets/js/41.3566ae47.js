(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{352:function(t,a,e){"use strict";e.r(a);var s=e(25),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"gitlab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[t._v("#")]),t._v(" Gitlab")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/nginx.md#setting-the-nginx-listen-port",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx配置"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://about.gitlab.com/installation/",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://gitlab.com/larryli/gitlab",target:"_blank",rel:"noopener noreferrer"}},[t._v("汉化包1"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://gitlab.com/xhang/gitlab",target:"_blank",rel:"noopener noreferrer"}},[t._v("汉化包2"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://gitlab.com/gitlab-org/gitlab-ci-yml/tree/master",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitlab-ci-yml"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("安装\n下载 "),a("code",[t._v(".rpm")]),t._v(" 文件, "),a("code",[t._v("rz")]),t._v(" 到你的服务器")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ yum -y install lrzsz\n$ rpm -i gitlab-ee-9.5.2-ee.0.el6.x86_64.rpm \n\n$ sudo gitlab-ctl reconfigure\n\n$ gitlab-ctl start|stop|status|restart\n")])])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/shansongxian/p/6678110.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("卸载"),a("OutboundLink")],1)])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sudo gitlab-ctl stop\nsudo rpm -e gitlab-ee\nfind / -name gitlab|xargs rm -rf\n\n# 在卸载gitlab然后再次安装执行sudo gitlab-ctl reconfigure的时候往往会出现：ruby_block[supervise_redis_sleep] action run\nsudo systemctl restart gitlab-runsvdir\n")])])]),a("blockquote",[a("p",[t._v("配置")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$ vim /etc/gitlab/gitlab.rb\n\n external_url 'http://git.xx.com'\n\n nginx['listen_addresses'] = ['*', '[::]']\n \n nginx['listen_port'] = 8191\n \n unicorn['port'] = 8192\n \n$ sudo gitlab-ctl reconfigure \n\n")])])]),a("p",[t._v("访问地址: "),a("code",[t._v("http://git.xx.com:8191")])]),t._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://gitlab.com/xhang/gitlab",target:"_blank",rel:"noopener noreferrer"}},[t._v("手动导出汉化补丁包汉化"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("请先使用官方包安装或升级完成，确认当前版本。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /opt/gitlab/embedded/service/gitlab-rails/VERSION\n")])])]),a("p",[t._v("假设当前版本为 "),a("code",[t._v("v9.0.0")]),t._v("，并确认汉化版本库是否包含该版本的汉化标签("),a("code",[t._v("-zh")]),t._v("结尾)，也就是是否包含 "),a("code",[t._v("v9.0.0-zh")]),t._v("。")]),t._v(" "),a("p",[t._v("如果版本相同，首先在本地 "),a("code",[t._v("clone")]),t._v(" 仓库。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 克隆汉化版本库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://gitlab.com/xhang/gitlab.git\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果已经克隆过，则进行更新")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" fetch\n")])])]),a("p",[t._v("然后比较汉化标签和原标签，导出 patch 用的 diff 文件。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导出9.0.0 版本的汉化补丁")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" v9.0.0 v9.0.0-zh "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/9.0.0-zh.diff\n")])])]),a("p",[t._v("然后上传 "),a("code",[t._v("9.0.0-zh.diff")]),t._v(" 文件到服务器。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# 停止 gitlab\nsudo gitlab-ctl stop\nsudo patch -d /opt/gitlab/embedded/service/gitlab-rails -p1 < 9.0.0-zh.diff\n")])])]),a("p",[t._v("确定没有 "),a("code",[t._v(".rej")]),t._v(" 文件，重启 GitLab 即可。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl start\n")])])]),a("p",[t._v("执行重新配置命令")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gitlab-ctl reconfigure\n")])])]),a("p",[t._v("如果汉化中出现问题，请重新安装 GitLab（注意备份数据）。")])])}),[],!1,null,null,null);a.default=n.exports}}]);